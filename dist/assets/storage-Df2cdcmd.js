const s="usageStats",a={total:{tokens:0,energyWh:0,waterL:0,co2g:0,queries:0},conversations:{},lastQuery:null};function o(){return structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}function n(){return new Promise(r=>{var t;if(!((t=chrome==null?void 0:chrome.storage)!=null&&t.local)){r(o());return}chrome.storage.local.get([s],e=>{if(chrome.runtime.lastError){console.warn("Error reading stats",chrome.runtime.lastError),r(o());return}r(e[s]||o())})})}function c(r){return new Promise(t=>{var e;if(!((e=chrome==null?void 0:chrome.storage)!=null&&e.local)){t();return}chrome.storage.local.set({[s]:r},()=>{chrome.runtime.lastError&&console.warn("Error saving stats",chrome.runtime.lastError),t()})})}export{o as g,n as l,c as s};
